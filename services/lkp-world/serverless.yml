service: lkp-world # To be replaced

configValidationMode: error

package:
  include:
    - src/

custom:
  esbuild:
    bundle: true
    minify: true
    target: node16
  localstack:
    debug: true
    autostart: false
    stages:
      - dev
    host: http://localstack
    edgePort: 4566
    lambda:
      mountCode: false

plugins: ${file(../../serverless.common.yml):plugins}

provider: ${file(../../serverless.common.yml):provider}

functions:
  world:
    handler: src/lambda/world.handler

stepFunctions:
  validate: true
  stateMachines:
    world:
      name: ${self:service}-world
      definition:
        StartAt: World
        States:
          World:
            Type: Task
            Resource:
              Fn::GetAtt: [world, Arn]
            Next: Passthru
          Passthru:
            Type: Pass
            Next: Stop
          Stop:
            Type: Pass
            End: true
#resources:
#  Resources:
# S3BucketConfig:
#   Type: AWS::S3::Bucket
#   Properties:
#     BucketName: ${self:custom.s3.configBucket}
#   DeletionPolicy: Delete

# DBUsers:
#   Type: AWS::DynamoDB::Table
#   Properties:
#     TableName: usersTable
#     AttributeDefinitions:
#       - AttributeName: email
#         AttributeType: S
#     KeySchema:
#       - AttributeName: email
#         KeyType: HASH
#     ProvisionedThroughput:
#       ReadCapacityUnits: 1
#       WriteCapacityUnits: 1
